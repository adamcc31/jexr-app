//
// _mobile-first.scss
// Mobile-first responsive enhancements for optimal mobile UX and Lighthouse performance
//
@use "variables" as *;
@use "sass:color";

/*********************************/
/*  MOBILE BREAKPOINT MIXINS     */
/*===============================*/
// Mobile-first approach: styles apply to mobile by default,
// then override for larger screens

$breakpoint-sm: 576px;
$breakpoint-md: 768px;
$breakpoint-lg: 992px;
$breakpoint-xl: 1200px;

// Mixin for tablet and up
@mixin tablet-up {
    @media (min-width: #{$breakpoint-md}) {
        @content;
    }
}

// Mixin for desktop and up
@mixin desktop-up {
    @media (min-width: #{$breakpoint-lg}) {
        @content;
    }
}

// Mixin for large desktop
@mixin large-desktop-up {
    @media (min-width: #{$breakpoint-xl}) {
        @content;
    }
}

/*********************************/
/*  MOBILE TYPOGRAPHY            */
/*===============================*/
// Optimize font sizes for mobile readability
@media (max-width: #{$breakpoint-md - 1}) {
    body {
        font-size: 14px;
        line-height: 1.6;
    }

    h1,
    .fs-1 {
        font-size: 28px !important;
    }

    h2,
    .fs-2 {
        font-size: 24px !important;
    }

    h3,
    .fs-3 {
        font-size: 20px !important;
    }

    h4,
    .fs-4 {
        font-size: 18px !important;
    }

    h5,
    .fs-5 {
        font-size: 16px !important;
    }

    h6,
    .fs-6 {
        font-size: 14px !important;
    }

    // Display headings
    .display-1 {
        font-size: 48px !important;
    }

    .display-2 {
        font-size: 44px !important;
    }

    .display-3 {
        font-size: 40px !important;
    }

    .display-4 {
        font-size: 36px !important;
    }

    .display-5 {
        font-size: 32px !important;
    }

    .display-6 {
        font-size: 28px !important;
    }

    // Title headings
    .title-heading {
        .heading {
            font-size: 28px !important;
            line-height: 1.3;

            &.sub-heading {
                font-size: 22px !important;
            }
        }

        .para-desc {
            font-size: 15px !important;
        }
    }

    .section-title {
        .title {
            font-size: 22px !important;
        }
    }
}

/*********************************/
/*  TOUCH-FRIENDLY ELEMENTS      */
/*===============================*/
// Ensure touch targets are at least 44px (Apple/Google guidelines)
@media (max-width: #{$breakpoint-md - 1}) {
    .btn {
        min-height: 44px;
        padding: 10px 20px;
        font-size: 14px;

        &.btn-sm {
            min-height: 40px;
            padding: 8px 16px;
            font-size: 13px;
        }

        &.btn-lg {
            min-height: 52px;
            padding: 14px 28px;
            font-size: 16px;
        }

        &.btn-icon {
            height: 44px;
            width: 44px;
        }
    }

    // Form elements
    .form-control {
        min-height: 44px;
        padding: 10px 12px;
        font-size: 16px; // Prevents iOS zoom on focus
    }

    .form-select {
        min-height: 44px;
        padding: 10px 12px;
        font-size: 16px;
    }

    // Links in navigation
    .navigation-menu>li>a,
    .nav-link {
        padding: 12px 16px !important;
        min-height: 44px;
        display: flex;
        align-items: center;
    }
}

/*********************************/
/*  MOBILE SPACING               */
/*===============================*/
// Reduce spacing on mobile for better content density
@media (max-width: #{$breakpoint-md - 1}) {
    .section {
        padding: 50px 0;
    }

    .section-two {
        padding: 30px 0;
    }

    // Reduce container padding
    .container,
    .container-fluid {
        padding-left: 16px;
        padding-right: 16px;
    }

    // Reduce card padding
    .card-body {
        padding: 16px;
    }

    // Reduce margins
    .mb-5 {
        margin-bottom: 2rem !important;
    }

    .mt-5 {
        margin-top: 2rem !important;
    }

    .py-5 {
        padding-top: 2rem !important;
        padding-bottom: 2rem !important;
    }

    // Features absolute
    .features-absolute {
        margin-top: -100px;

        &.subscribe-search {
            margin-top: -80px;
        }
    }
}

/*********************************/
/*  MOBILE NAVIGATION            */
/*===============================*/
// Mobile-optimized navigation
@media (max-width: #{$breakpoint-lg - 1}) {
    #topnav {
        background-color: $white;
        box-shadow: $shadow;

        .navbar-toggle {
            display: block !important;
        }

        .logo {
            line-height: 70px;

            .l-dark {
                display: inline-block !important;
            }

            .l-light {
                display: none !important;
            }
        }

        #navigation {
            display: none;
            position: absolute;
            top: 70px;
            left: 0;
            width: 100%;
            background-color: $white;
            box-shadow: 0 10px 20px rgba($dark, 0.1);
            max-height: 70vh;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
            z-index: 1000;

            &.open {
                display: block !important;
            }
        }

        .navigation-menu {
            display: flex;
            flex-direction: column;
            padding: 10px 0;

            >li {
                float: none;
                width: 100%;
                margin: 0 !important;

                >a {
                    display: block;
                    padding: 12px 20px !important;
                    min-height: 48px;
                    line-height: 24px;
                    color: $dark !important;
                    border-bottom: 1px solid rgba($gray-200, 0.5);
                }

                .submenu {
                    position: static !important;
                    box-shadow: none !important;
                    background-color: $gray-100 !important;
                    padding-left: 20px !important;
                    display: none;

                    &.open {
                        display: block;
                    }

                    li a {
                        padding: 10px 20px !important;
                    }
                }
            }
        }

        .buy-button {
            width: 100%;
            padding: 15px 20px;
            line-height: normal;
            float: none;

            .btn {
                width: 100%;
                text-align: center;
            }
        }

        .menu-extras {
            float: right;
            margin-right: 0;
        }
    }
}

/*********************************/
/*  PERFORMANCE OPTIMIZATIONS    */
/*===============================*/
// Reduce animations on mobile for better performance
// NOTE: Using targeted selectors instead of * to avoid massive reflow
@media (max-width: #{$breakpoint-md - 1}) {

    // Disable kenburns animation on mobile (heavy CPU usage)
    .image-wrap {
        animation: none !important;
        position: relative;
        top: 0;
        bottom: 0;
        left: 0;
        right: 0;
    }

    // Reduce shadow complexity on mobile
    .shadow,
    .shadow-lg,
    .shadow-md {
        box-shadow: 0 2px 8px rgba($dark, 0.1) !important;
    }

    // Remove parallax effects on mobile
    [data-parallax] {
        transform: none !important;
    }

    // Reduce transition time for specific elements (not all)
    .btn,
    .card,
    .nav-link,
    a {
        transition-duration: 0.15s !important;
    }
}

/*********************************/
/*  MOBILE IMAGES & MEDIA        */
/*===============================*/
// Ensure images are responsive
@media (max-width: #{$breakpoint-md - 1}) {
    img {
        max-width: 100%;
        height: auto;
    }

    // Video responsive
    [data-type] iframe,
    [data-type] video,
    iframe,
    video {
        max-width: 100% !important;
        height: auto !important;
        aspect-ratio: 16/9;
    }

    // Avatar adjustments
    .avatar {
        &.avatar-ex-large {
            height: 120px;
            width: 120px;
        }

        &.avatar-xl-large {
            height: 100px;
            width: 100px;
        }

        &.avatar-large {
            height: 80px;
            width: 80px;
        }

        &.avatar-medium {
            height: 70px;
            width: 70px;
        }
    }

    // Profile banner
    .profile-banner img {
        width: 100%;
        height: 150px;
        object-fit: cover;
    }
}

/*********************************/
/*  MOBILE GRID ADJUSTMENTS      */
/*===============================*/
// Override grid for mobile-specific layouts
@media (max-width: #{$breakpoint-sm - 1}) {

    // Force full-width on small screens
    .col,
    [class*="col-"] {
        padding-left: 10px;
        padding-right: 10px;
    }

    .row {
        margin-left: -10px;
        margin-right: -10px;
    }
}

/*********************************/
/*  MOBILE TABLES                */
/*===============================*/
// Make tables scrollable on mobile
@media (max-width: #{$breakpoint-md - 1}) {
    .table-responsive {
        display: block;
        width: 100%;
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
    }
}

/*********************************/
/*  MOBILE MODALS                */
/*===============================*/
@media (max-width: #{$breakpoint-md - 1}) {
    .modal-dialog {
        margin: 10px;
        max-width: calc(100% - 20px);
    }

    .modal-content {
        border-radius: 12px;
    }

    .modal-body {
        padding: 16px;
    }
}

/*********************************/
/*  FIX HORIZONTAL OVERFLOW      */
/*===============================*/
html,
body {
    overflow-x: hidden;
    width: 100%;
}

// Prevent horizontal scroll from wide elements
@media (max-width: #{$breakpoint-md - 1}) {

    .container,
    .container-fluid,
    .row {
        max-width: 100vw;
    }

    // Fix common overflow issues
    pre,
    code {
        white-space: pre-wrap;
        word-wrap: break-word;
        max-width: 100%;
        overflow-x: auto;
    }

    // Long text handling
    h1,
    h2,
    h3,
    h4,
    h5,
    h6,
    p,
    span,
    a,
    label {
        word-wrap: break-word;
        overflow-wrap: break-word;
    }
}

/*********************************/
/*  MOBILE HOME SECTIONS         */
/*===============================*/
@media (max-width: #{$breakpoint-md - 1}) {
    .bg-home {
        min-height: auto;
        height: auto;
        padding: 100px 0 60px;
    }

    .bg-half-260 {
        padding: 120px 0 60px;
        height: auto;
    }

    .bg-half {
        padding: 100px 0 50px;
        height: auto;
    }

    .bg-half-170 {
        padding: 100px 0 50px;
        height: auto;
    }
}

/*********************************/
/*  PRINT STYLES                 */
/*===============================*/
@media print {

    .no-print,
    #topnav,
    .footer,
    .btn,
    nav {
        display: none !important;
    }

    body {
        font-size: 12pt;
    }
}